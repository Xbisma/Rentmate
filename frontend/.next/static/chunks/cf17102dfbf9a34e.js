(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},87005,e=>{"use strict";var t=e.i(43476),r=e.i(18566),s=e.i(71645),n=e.i(46932);e.i(47167);var a=e.i(31178),o=e.i(47414),l=e.i(74008),i=e.i(21476),d=e.i(72846),c=s,u=e.i(37806);function m(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class p extends c.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,d.isHTMLElement)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:r,anchorX:n,root:a}){let o=(0,c.useId)(),l=(0,c.useRef)(null),i=(0,c.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,c.useContext)(u.MotionConfigContext),h=function(...e){return s.useCallback(function(...e){return t=>{let r=!1,s=e.map(e=>{let s=m(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():m(e[t],null)}}}}(...e),e)}(l,e?.ref);return(0,c.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:c,right:u}=i.current;if(r||!l.current||!e||!t)return;let m="left"===n?`left: ${c}`:`right: ${u}`;l.current.dataset.motionPopId=o;let p=document.createElement("style");d&&(p.nonce=d);let h=a??document.head;return h.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${m}px !important;
            top: ${s}px !important;
          }
        `),()=>{h.contains(p)&&h.removeChild(p)}},[r]),(0,t.jsx)(p,{isPresent:r,childRef:l,sizeRef:i,children:c.cloneElement(e,{ref:h})})}let x=({children:e,initial:r,isPresent:n,onExitComplete:a,custom:l,presenceAffectsLayout:d,mode:c,anchorX:u,root:m})=>{let p=(0,o.useConstant)(f),x=(0,s.useId)(),g=!0,b=(0,s.useMemo)(()=>(g=!1,{id:x,initial:r,isPresent:n,custom:l,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;a&&a()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[n,p,a]);return d&&g&&(b={...b}),(0,s.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[n]),s.useEffect(()=>{n||p.size||!a||a()},[n]),"popLayout"===c&&(e=(0,t.jsx)(h,{isPresent:n,anchorX:u,root:m,children:e})),(0,t.jsx)(i.PresenceContext.Provider,{value:b,children:e})};function f(){return new Map}var g=e.i(64978);let b=e=>e.key||"";function y(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let w=({children:e,custom:r,initial:n=!0,onExitComplete:i,presenceAffectsLayout:d=!0,mode:c="sync",propagate:u=!1,anchorX:m="left",root:p})=>{let[h,f]=(0,g.usePresence)(u),w=(0,s.useMemo)(()=>y(e),[e]),j=u&&!h?[]:w.map(b),v=(0,s.useRef)(!0),N=(0,s.useRef)(w),C=(0,o.useConstant)(()=>new Map),[T,k]=(0,s.useState)(w),[P,E]=(0,s.useState)(w);(0,l.useIsomorphicLayoutEffect)(()=>{v.current=!1,N.current=w;for(let e=0;e<P.length;e++){let t=b(P[e]);j.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[P,j.length,j.join("-")]);let R=[];if(w!==T){let e=[...w];for(let t=0;t<P.length;t++){let r=P[t],s=b(r);j.includes(s)||(e.splice(t,0,r),R.push(r))}return"wait"===c&&R.length&&(e=R),E(y(e)),k(w),null}let{forceRender:I}=(0,s.useContext)(a.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:P.map(e=>{let s=b(e),a=(!u||!!h)&&(w===P||j.includes(s));return(0,t.jsx)(x,{isPresent:a,initial:(!v.current||!!n)&&void 0,custom:r,presenceAffectsLayout:d,mode:c,root:p,onExitComplete:a?void 0:()=>{if(!C.has(s))return;C.set(s,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(I?.(),E(N.current),u&&f?.(),i&&i())},anchorX:m,children:e},s)})})};var j=e.i(3215);let v=async e=>{try{return(await j.default.post("/users/login",e)).data}catch(e){throw e}};function N(){let e=(0,r.useRouter)(),[a,o]=(0,s.useState)(!0),[l,i]=(0,s.useState)({email:"",password:"",name:"",confirmPassword:"",phone:"",userType:"tenant"}),d=e=>{let{name:t,value:r,type:s,checked:n}=e.target;i({...l,[t]:"checkbox"===s?n?"owner":"tenant":r})},c=e=>{i({...l,userType:e})},u=async t=>{if(t.preventDefault(),a)try{console.log("Attempting login with:",{email:l.email,password:l.password});let t=await v({email:l.email,password:l.password,userType:l.userType});console.log("Login response:",t),t.token?(localStorage.setItem("token",t.token),localStorage.setItem("userType",l.userType),t.user&&(localStorage.setItem("userId",t.user._id||t.user.id),localStorage.setItem("userName",t.user.name||t.user.email)),"tenant"===l.userType?e.push("/tenant/dashboard"):"owner"===l.userType?e.push("/owner/dashboard"):e.push("/dashboard")):alert("Login successful but no token received")}catch(e){console.error("Login error:",e),alert(e.response?.data?.message||e.message||"Login failed. Please check your credentials.")}else{if(l.password!==l.confirmPassword)return void alert("Passwords do not match!");if(!l.name||!l.email||!l.phone||!l.password)return void alert("Please fill in all required fields!");try{console.log("Attempting registration with:",{name:l.name,email:l.email,password:l.password,phone:l.phone,userType:l.userType});let t=await registerUser({name:l.name,email:l.email,password:l.password,phone:l.phone,role:l.userType});console.log("Registration response:",t),t.token?(localStorage.setItem("token",t.token),localStorage.setItem("userType",l.userType),t.user&&(localStorage.setItem("userId",t.user._id||t.user.id),localStorage.setItem("userName",t.user.name)),"tenant"===l.userType?e.push("/tenant/dashboard"):e.push("/owner/dashboard")):alert("Registration successful but no token received")}catch(e){console.error("Registration error:",e),alert(e.response?.data?.message||e.message||"Registration failed. Please try again.")}}};return(0,t.jsx)("div",{className:"min-h-screen bg-linear-to-br from-blue-50 to-indigo-100 pt-20 flex items-center justify-center p-4",children:(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:(0,t.jsx)(w,{mode:"wait",children:a?(0,t.jsxs)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-2",children:"Login to Rentmate"}),(0,t.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Contact property owners and save your favorites"}),(0,t.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,t.jsx)("input",{type:"email",name:"email",value:l.email,onChange:d,required:!0,className:"input-field",placeholder:"Enter your email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)("input",{type:"password",name:"password",value:l.password,onChange:d,required:!0,className:"input-field",placeholder:"Enter your password"})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"I am a:"}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>c("tenant"),className:`flex-1 py-2 px-4 rounded-lg border-2 transition-all duration-300 ${"tenant"===l.userType?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"ðŸ  Tenant"}),(0,t.jsx)("button",{type:"button",onClick:()=>c("owner"),className:`flex-1 py-2 px-4 rounded-lg border-2 transition-all duration-300 ${"owner"===l.userType?"border-green-500 bg-green-50 text-green-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"ðŸ”‘ Owner"})]})]}),(0,t.jsx)(n.motion.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-linear-to-r from-blue-600 to-purple-600 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl",children:"Login to Continue"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",(0,t.jsx)("button",{onClick:()=>{o(!1)},className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Sign up here"})]})})]},"login"):(0,t.jsxs)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-2",children:"Create Account"}),(0,t.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Join Rentmate and find your dream home"}),(0,t.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,t.jsx)("input",{type:"text",name:"name",value:l.name,onChange:d,required:!0,className:"input-field",placeholder:"Enter your full name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,t.jsx)("input",{type:"email",name:"email",value:l.email,onChange:d,required:!0,className:"input-field",placeholder:"Enter your email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",name:"phone",value:l.phone,onChange:d,required:!0,className:"input-field",placeholder:"Enter your phone number"})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"I want to:"}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>c("tenant"),className:`flex-1 py-3 px-4 rounded-lg border-2 transition-all duration-300 ${"tenant"===l.userType?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:[(0,t.jsx)("div",{className:"text-lg",children:"ðŸ "}),(0,t.jsx)("div",{className:"text-sm font-semibold",children:"Find Properties"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Tenant"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>c("owner"),className:`flex-1 py-3 px-4 rounded-lg border-2 transition-all duration-300 ${"owner"===l.userType?"border-green-500 bg-green-50 text-green-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:[(0,t.jsx)("div",{className:"text-lg",children:"ðŸ”‘"}),(0,t.jsx)("div",{className:"text-sm font-semibold",children:"List Properties"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Owner"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)("input",{type:"password",name:"password",value:l.password,onChange:d,required:!0,className:"input-field",placeholder:"Create a password"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,t.jsx)("input",{type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:d,required:!0,className:"input-field",placeholder:"Confirm your password"})]}),(0,t.jsx)(n.motion.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-linear-to-r from-green-600 to-blue-600 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl",children:"Create Account"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,t.jsx)("button",{onClick:()=>{o(!0)},className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Login here"})]})})]},"signup")})})})}e.s(["default",()=>N],87005)}]);