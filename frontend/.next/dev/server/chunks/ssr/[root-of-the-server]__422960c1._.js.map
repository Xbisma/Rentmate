{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///E:/CS-B23/Sem%2005/FS%20Theory/RENTMATE/Rentmate/frontend/services/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000/api\",\r\n});\r\n\r\n// Attach token automatically\r\nAPI.interceptors.request.use((req) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) {\r\n    req.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return req;\r\n});\r\n\r\n// Handle token expiry and other auth errors\r\nAPI.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      // Token expired or invalid - clear auth data and redirect to login\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"userType\");\r\n      localStorage.removeItem(\"userId\");\r\n      localStorage.removeItem(\"userName\");\r\n      \r\n      // Only redirect if not already on auth pages\r\n      if (typeof window !== 'undefined' && !window.location.pathname.includes('/auth/')) {\r\n        window.location.href = '/auth/login';\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default API;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,SAAS,iEAAmC;AAC9C;AAEA,6BAA6B;AAC7B,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,IAAI,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAC/C;IACA,OAAO;AACT;AAEA,4CAA4C;AAC5C,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAClC,mEAAmE;QACnE,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QAExB,6CAA6C;QAC7C,IAAI,kDAAkB,eAAe,CAAC,OAAO,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC;;IAG1E;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///E:/CS-B23/Sem%2005/FS%20Theory/RENTMATE/Rentmate/frontend/services/authService.js"],"sourcesContent":["// frontend/services/authService.js\r\nimport API from \"./api\";\r\n\r\nexport const loginUser = async (credentials) => {\r\n  try {\r\n    const response = await API.post(\"/users/login\", credentials);\r\n    return response.data;\r\n  } catch (error) {\r\n    // Rethrow the error so it can be caught in the component\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const registerUser = async (userData) => {\r\n  try {\r\n    const response = await API.post(\"/users/register\", userData);\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const resetPassword = async (resetData) => {\r\n  try {\r\n    const response = await API.post(\"/users/reset-password\", resetData);\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\nexport const logoutUser = () => {\r\n  localStorage.removeItem(\"token\");\r\n  localStorage.removeItem(\"userType\");\r\n  localStorage.removeItem(\"userId\");\r\n  localStorage.removeItem(\"userName\");\r\n};\r\n\r\nexport const getCurrentUser = () => {\r\n  const token = localStorage.getItem(\"token\");\r\n  return token ? { \r\n    token, \r\n    userType: localStorage.getItem(\"userType\"),\r\n    userId: localStorage.getItem(\"userId\"),\r\n    userName: localStorage.getItem(\"userName\")\r\n  } : null;\r\n};\r\n\r\nexport const isAuthenticated = () => {\r\n  return !!localStorage.getItem(\"token\");\r\n};"],"names":[],"mappings":"AAAA,mCAAmC;;;;;;;;;;;;;;;AACnC;;AAEO,MAAM,YAAY,OAAO;IAC9B,IAAI;QACF,MAAM,WAAW,MAAM,0HAAG,CAAC,IAAI,CAAC,gBAAgB;QAChD,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,yDAAyD;QACzD,MAAM;IACR;AACF;AAEO,MAAM,eAAe,OAAO;IACjC,IAAI;QACF,MAAM,WAAW,MAAM,0HAAG,CAAC,IAAI,CAAC,mBAAmB;QACnD,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,MAAM;IACR;AACF;AAEO,MAAM,gBAAgB,OAAO;IAClC,IAAI;QACF,MAAM,WAAW,MAAM,0HAAG,CAAC,IAAI,CAAC,yBAAyB;QACzD,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,MAAM;IACR;AACF;AACO,MAAM,aAAa;IACxB,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;AAC1B;AAEO,MAAM,iBAAiB;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,OAAO,QAAQ;QACb;QACA,UAAU,aAAa,OAAO,CAAC;QAC/B,QAAQ,aAAa,OAAO,CAAC;QAC7B,UAAU,aAAa,OAAO,CAAC;IACjC,IAAI;AACN;AAEO,MAAM,kBAAkB;IAC7B,OAAO,CAAC,CAAC,aAAa,OAAO,CAAC;AAChC"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///E:/CS-B23/Sem%2005/FS%20Theory/RENTMATE/Rentmate/frontend/app/%28public%29/auth/login/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter } from 'next/navigation';\r\nimport { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { loginUser } from \"../../../../services/authService\";\r\nimport Link from 'next/link';\r\n\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n    userType: 'tenant' // 'tenant' or 'owner'\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: type === 'checkbox' ? (checked ? 'owner' : 'tenant') : value\r\n    });\r\n  };\r\n\r\n  const handleUserTypeChange = (type) => {\r\n    setFormData({\r\n      ...formData,\r\n      userType: type\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      console.log('Attempting login with:', {\r\n        email: formData.email,\r\n        password: formData.password\r\n      });\r\n\r\n      const data = await loginUser({\r\n        email: formData.email,\r\n        password: formData.password,\r\n        userType: formData.userType  // Add userType to login request if needed\r\n      });\r\n\r\n      console.log('Login response:', data);\r\n\r\n      // Store user data\r\n      if (data.token) {\r\n        localStorage.setItem(\"token\", data.token);\r\n        localStorage.setItem(\"userType\", formData.userType);\r\n        \r\n        // If your backend returns user info\r\n        if (data.user) {\r\n          localStorage.setItem(\"userId\", data.user._id || data.user.id);\r\n          localStorage.setItem(\"userName\", data.user.name || data.user.email);\r\n        }\r\n\r\n        // Redirect based on user type\r\n        if (formData.userType === 'tenant') {\r\n          router.push(\"/tenant/dashboard\");\r\n        } else if (formData.userType === 'owner') {\r\n          router.push(\"/owner/dashboard\");\r\n        } else {\r\n          router.push(\"/dashboard\");\r\n        }\r\n      } else {\r\n        alert(\"Login successful but no token received\");\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Login error:', err);\r\n      const errorMessage = err.response?.data?.message || \r\n                          err.message || \r\n                          \"Login failed. Please check your credentials.\";\r\n      alert(errorMessage);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-linear-to-br from-blue-50 to-indigo-100 pt-20 flex items-center justify-center p-4\">\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"max-w-md w-full bg-white rounded-2xl shadow-xl p-8\"\r\n      >\r\n        <h1 className=\"text-3xl font-bold text-center text-gray-800 mb-2\">Login to Rentmate</h1>\r\n        <p className=\"text-gray-600 text-center mb-8\">Contact property owners and save your favorites</p>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email Address</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n              required\r\n              className=\"input-field\"\r\n              placeholder=\"Enter your email\"\r\n            />\r\n          </div>\r\n          \r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              value={formData.password}\r\n              onChange={handleChange}\r\n              required\r\n              className=\"input-field\"\r\n              placeholder=\"Enter your password\"\r\n            />\r\n          </div>\r\n\r\n          {/* User Type Selection */}\r\n          <div className=\"border-t border-gray-200 pt-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">I am a:</label>\r\n            <div className=\"flex space-x-4\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => handleUserTypeChange('tenant')}\r\n                className={`flex-1 py-2 px-4 rounded-lg border-2 transition-all duration-300 ${\r\n                  formData.userType === 'tenant' \r\n                    ? 'border-blue-500 bg-blue-50 text-blue-700' \r\n                    : 'border-gray-300 bg-white text-gray-700 hover:border-gray-400'\r\n                }`}\r\n              >\r\n                üè† Tenant\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => handleUserTypeChange('owner')}\r\n                className={`flex-1 py-2 px-4 rounded-lg border-2 transition-all duration-300 ${\r\n                  formData.userType === 'owner' \r\n                    ? 'border-green-500 bg-green-50 text-green-700' \r\n                    : 'border-gray-300 bg-white text-gray-700 hover:border-gray-400'\r\n                }`}\r\n              >\r\n                üîë Owner\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          <motion.button\r\n            type=\"submit\"\r\n            whileHover={{ scale: 1.02 }}\r\n            whileTap={{ scale: 0.98 }}\r\n            className=\"w-full bg-linear-to-r from-blue-600 to-purple-600 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl\"\r\n          >\r\n            Login to Continue\r\n          </motion.button>\r\n        </form>\r\n        \r\n        <div className=\"mt-6 text-center\">\r\n          <p className=\"text-gray-600\">\r\n            Don't have an account?{' '}\r\n            <Link \r\n              href=\"/auth/signup\"\r\n              className=\"text-blue-600 hover:text-blue-700 font-semibold\"\r\n            >\r\n              Sign up here\r\n            </Link>\r\n          </p>\r\n          <p className=\"text-gray-600 mt-2\">\r\n            <Link \r\n              href=\"/auth/forgot-password\"\r\n              className=\"text-blue-600 hover:text-blue-700 font-semibold\"\r\n            >\r\n              Forgot Password?\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}